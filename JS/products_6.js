var arr = [{
        code: "GL123",
        name: "Mình yêu nhau nhé em!",
        price: 540000,
        des: "Mình yêu nhau nhé em! gồm có hoa hồng đỏ và hoa lan trắng.",
        image: "Images/1.jpg"
    }, {
        code: "GL103",
        name: "Vươn xa 2",
        price: 840000,
        des: "Vươn Xa 2 gồm các loại hoa : - Hoa hồng môn - Hoa hồng dâu - Hoa mõm sói - Hoa lan mokara vàng - Hoa ly vàng",
        image: "Images/2.jpg"
    }, {
        code: "GL341",
        name: "Sức khoẻ dồi dào",
        price: 960000,
        des: "Sức khỏe dồi dào gồm : - Địa lan (hoa theo mùa) - Hướng dương - Ly hồng  - Thạch thảo tím - Lá và...",
        image: "Images/3.jpg"
    }, {
        code: "GL003",
        name: "Nắng vàng tươi",
        price: 790000,
        des: "Nắng vàng tươi gồm các loại hoa : - Lan mõm sói - 25 hoa hướng dương - 15 hoa hồng vàng - Lá v&ag...",
        image: "Images/4.jpg"
    }, {
        code: "GL631",
        name: "Chúc thành công",
        price: 480000,
        des: "Vchúc thành công được thiết kế với các loại hoa : - Hoa thiên điểu - Hoa hồng đỏ - Hoa ly vàng - Hồng môn",
        image: "Images/5.jpg"
    }, {
        code: "GL133",
        name: "Khát khao",
        price: 350000,
        des: "Khát Khao gồm có - Hoa mõm sói - Hoa lan vũ nữ - Hoa hồng đỏ và trắng - Hoa ly vàng",
        image: "Images/6.jpg"
    }, {
        code: "GL148",
        name: "Trắng xanh",
        price: 420000,
        des: "Trắng Xanh gồm các loại hoa : - Hoa cát tường trăng - Hoa mõm sói vàng",
        image: "Images/7.jpg"
    }, {
        code: "GL103",
        name: "Ánh vàng",
        price: 600000,
        des: "VÁnh Vàng gồm những loại hoa : - Greenvicky - Hoa hồng vàng - Hoa hồng pastel",
        image: "Images/8.jpg"
    }, {
        code: "GL102",
        name: "Vươn xa 3",
        price: 840000,
        des: "Vươn Xa 3 gồm các loại hoa : - Hoa hồng môn - Hoa hồng dâu - Hoa mõm sói - Hoa lan mokara vàng - Hoa ly vàng",
        image: "Images/9.jpg"
    }, {
        code: "GL103",
        name: "I Love You",
        price: 650000,
        des: "I Love You ! được thiết kế với hoa hồng đỏ và phụ liệu trang trí",
        image: "Images/10.jpg"
    }, {
        code: "GL150",
        name: "Hoa chúc mừng 150",
        price: 420000,
        des: "Hoa Chúc Mừng 150 gồm những loại hoa : - Lan mokara đỏ - Lan mokara vàng - Hoa hồng đỏ - Hoa ly vàng",
        image: "Images/11.jpg"
    }, {
        code: "GL149",
        name: "Vũ điệu",
        price: 1200000,
        des: "Vũ điệu gồm các loại hoa : - Hoa hồng môn - Hoa hồng đỏ - Hoa hướng dương - Lan vũ nữ - Lan mokara vàng",
        image: "Images/12.jpg"
    }, {
        code: "GL141",
        name: "Bé xinh",
        price: 420.000,
        des: "Bé Xinh gồm các loại hoa : - Hoa calimero - Hoa đồng tiền nhí - Hoa hồng trắng - Hoa hồng dâu",
        image: "Images/13.jpg"
    }, {
        code: "GL053",
        name: "Yêu nhau dài lâu",
        price: 750000,
        des: "Yêu Nhau Dài Lâu gồm các loại hoa : - Hoa cẩm tú cầu - Hoa greenvicky - Hoa hồng pastel - Hoa hồng son môi - Hoa hồng dâu",
        image: "Images/14.jpg"
    }, {
        code: "GL113",
        name: "Strong And Success",
        price: 480000,
        des: "Strong and success gồm các loại hoa : - Hoa hướng dương - Hoa hồng vàng - Môn xanh - Cẩm tú cầu",
        image: "Images/15.jpg"
    }, {
        code: "GL019",
        name: "Hoa Vip 19",
        price: 960000,
        des: "Hoa Vip 19 được thiết kế với các loại hoa : - Hoa hồng môn - Ly vàng - Lan vũ nữ - Lan mokara vàng",
        image: "Images/16.jpg"
    }, {
        code: "GL072",
        name: "Hạ Vàng",
        price: 1850000,
        des: "Hạ Vàng được thiết kế với các loại hoa : - Lan hồ điệp - Lan vũ nữ - Lan mokara vàng - Lan mokara đỏ - Ly v&agra",
        image: "Images/17.jpg"
    }, {
        code: "GL099",
        name: "Vững Chãi",
        price: 720000,
        des: "Vững Chãi được thiết kế với các loại hoa : - Lan bò cạp đỏ - Cẩm tú cầu - Lan hồ điệp - Cúc calimero",
        image: "Images/18.jpg"
    }, {
        code: "GL075",
        name: "Niềm Vui Lớn",
        price: 840000,
        des: "Niềm vui mới được thiết kế từ các loại hoa : - Hoa hồng đỏ - Lan mokara vàng - Lan bò cạp đỏ - Ly vàng",
        image: "Images/19.jpg"
    }, {
        code: "GL064",
        name: "Cám ơn",
        price: 400000,
        des: "Cám Ơn được thiết kế với các loại hoa : - Lan mokara đỏ - Lan mokara vàng - Ly vàng - Hoa hồng phấn - L&a",
        image: "Images/20.jpg"
    }, {
        code: "GL061",
        name: "Kiêu hãnh",
        price: 660000,
        des: "Kiêu Hãnh được thiết kế với các loại hoa : - Ly vàng - Hoa hướng dương - Cẩm tú cầu - Lan bò cạp đỏ",
        image: "Images/21.jpg"
    }, {
        code: "GL503",
        name: "Niềm Tin",
        price: 600000,
        des: "Niềm tin được thiết kế với các loại hoa : - Lan mokara tím - Lan thái trắng - Chuỗi ngọc - Hoa hồng phấn",
        image: "Images/22.jpg"
    }, {
        code: "GL101",
        name: "Hoa Tươi Đẹp",
        price: 1200000,
        des: "Hoa Giỏ 101 được thiết kế với các loại hoa : - Ly vàng - Hoa hồng trắng - Hoa hồng phấn - Lan thái trắng",
        image: "Images/23.jpg"
    },
    //////////////////////////////////////////////////////////////////////
    {
        code: "GL086",
        name: "Ngày Mới Nắng Lên",
        price: 1000000,
        des: "Ngày Mới Nắng Lên được cắm với : - Hoa lan vũ nữ - Hoa hồng trắng - Hoa thiên điểu - Hoa lan hồ điệp",
        image: "Images/24.jpg"
    }, {
        code: "GL087",
        name: "Chào Ngày Mới ",
        price: 1500000,
        des: "Vươn Xa 2 gồm các loại hoa : - Hoa hồng môn - Hoa hồng dâu - Hoa mõm sói - Hoa lan mokara vàng - Hoa ly vàng",
        image: "Images/25.jpg"
    }, {
        code: "GL088",
        name: "Hướng Về Mặt Trời ",
        price: 150000,
        des: "Hướng Về Mặt Trời gồm có lan vũ nữ và hoa hướng dương",
        image: "Images/26.jpg"
    }, {
        code: "GL089",
        name: "Ấm Áp",
        price: 156000,
        des: "Ấm Áp được thiết kế với các loại hoa : - Hoa hướng dương - Hoa hồng trắng - Hoa pingpong xanh - Hoa địa lan ( hoa theo mẫu )",
        image: "Images/27.jpg"
    }, {
        code: "GL090",
        name: "Bình Lan Vũ Nữ",
        price: 200000,
        des: "Bình Lan Vũ Nữ được thiết kế với hoa lan vũ nữ và phụ liệu trang trí",
        image: "Images/28.jpg"
    }, {
        code: "GL092",
        name: "Trọn Niềm Vui",
        price: 156000,
        des: "Trọn Niềm Vui được thiết kế với các loại hoa : - Hoa hồng đỏ và dâu - Hoa lan hồ điệp - Hoa lan mokara vàng - Hoa bò cạp đỏ",
        image: "Images/29.jpg"
    }, {
        code: "GL093",
        name: "Hoa Của Trời",
        price: 120000,
        des: "Hoa Của Trời gồm các loại hoa : - Hoa thiên điểu - Hoa môn xanh - Hoa greenvicky - Hoa lan hồ điệp - Hoa hồng trứng",
        image: "Images/30.jpg"
    }, {
        code: "GL094",
        name: "Sang Trọng 5",
        price: 2000000,
        des: "Sang Trọng 5 gồm các loại hoa : - Hoa địa lan ( hoa theo mùa ) - Hoa phi yến - Lan vũ nữ - Hoa hồng trắng",
        image: "Images/31.jpg"
    }, {
        code: "GL095",
        name: "Sinh Nhật Hồng",
        price: 960000,
        des: "Sinh Nhật Hồng gồm các loại hoa : - Hoa mõm sói - Hoa hồng dâu và hồng pastel - Hoa sao tím",
        image: "Images/32.jpg"
    }, {
        code: "GL096",
        name: "Hoa Bó Dài 60 ",
        price: 1750000,
        des: "Hoa Bó Dài 60 gồm có hoa kì lân tím, hoa hồng trắng và hoa hồng tím.",
        image: "Images/33.jpg"
    }, {
        code: "GL097",
        name: "Không Phai Nhòa",
        price: 2000000,
        des: "Không Phai Nhòa được bó với 20 hoa hồng đỏ và hoa sao vàng",
        image: "Images/34.jpg"
    }, {
        code: "GL098",
        name: "Yêu Thương Quay Về",
        price: 1200000,
        des: "Yêu Thương Quay Về được bó với 20 hoa hồng đỏ và hoa baby",
        image: "Images/35.jpg"
    },
    //////////////////////////////////////////////////////////////////////////////////
    {
        code: "GL010",
        name: "Hoa Cưới 14",
        price: 1200000,
        des: "Hoa Cưới 14 được bó với hoa lan hồ điệp trắng",
        image: "Images/36.jpg",
    }, {
        code: "GL011",
        name: "Hoa Cưới 07",
        price: 5000000,
        des: "Hoa Cưới 07 được bó với hoa hồng trắng và hoa lan trắng",
        image: "Images/37.jpg",
    }, {
        code: "GL012",
        name: "Hoa Cưới 06",
        price: 440000,
        des: "Hoa Cưới 06 được bó với hoa hồng trắng và hoa chuỗi ngọc",
        image: "Images/38.jpg",
    }, {
        code: "GL013",
        name: "Hoa Cưới 01",
        price: 960000,
        des: "Hoa Cưới 01 được bó với hoa hồng trắng hà lan và hoa baby hà lan.",
        image: "Images/39.jpg",
    }, {
        code: "GL014",
        name: "Hoa Cưới 12",
        price: 1200000,
        des: "Hoa Cưới 12 được bó với hoa cát tường và hoa hồng dâu",
        image: "Images/40.jpg",
    }, {
        code: "GL015",
        name: "Hoa Cưới 13",
        price: 2000000,
        des: "Hoa Cưới 15 được bó với hoa hồng tím, hoa hồng pastel, hoa hồng trắng và hoa mẫu đơn",
        image: "Images/41.jpg",
    }, {
        code: "GL016",
        name: "Hoa Cưới 08",
        price: 350000,
        des: "Hoa Cưới 08 được bó với hoa hồng tím, hoa cát tường và hoa phăng xê",
        image: "Images/42.jpg",
    }, {
        code: "GL017",
        name: "Hoa Cưới 10",
        price: 1400000,
        des: "Hoa Cưới 10 được bó với hoa hồng tím",
        image: "Images/43.jpg",
    }, {
        code: "GL018",
        name: "Hoa Cưới 03",
        price: 2700000,
        des: "Hoa Cưới 03 được bó với hoa địa lan tím ( hoa theo mùa )",
        image: "Images/44.jpg",
    }, {
        code: "GL019",
        name: "Hoa Cưới 04",
        price: 4000000,
        des: "Hoa Cưới 04 được bó với hoa hồng trắng.",
        image: "Images/45.jpg",
    }, {
        code: "GL020",
        name: "Hoa Cưới 05",
        price: 1250000,
        des: "Hoa Cưới 05 gồm hoa sen và phụ liệu trang trí",
        image: "Images/46.jpg",
    }, {
        code: "GL021",
        name: "Hoa Cưới 09",
        price: 700000,
        des: "Hoa Cưới 09 gồm hoa hồng phấn và hoa baby",
        image: "Images/47.jpg",
    }
];



function displayProducts() {

    var super_div = document.getElementById('list_products');

    for (var i = 44; i > 32; i--) {
        var sup_div = document.createElement('div');
        // sup_div.class = 'col-6';
        // sup_div.setAttribute('class', "col-6");
        var sub_div = document.createElement('div');
        // sub_div.class = "product box active";
        sub_div.setAttribute('class', "product box active");
        // sub_div.addEventListener();
        var images = document.createElement('img');
        images.src = arr[i].image;
        images.addEventListener('click', show); // gắn hàm show vào sư kiện onclick của ảnh

        var h2_name = document.createElement('h3');
        h2_name.innerHTML = arr[i].name;

        var h3_code = document.createElement('h3');
        h3_code.innerHTML = arr[i].code;

        var h3_price = document.createElement('h3');
        h3_price.innerHTML = "Giá: " + arr[i].price + "đ";

        sub_div.appendChild(images);
        sub_div.appendChild(h2_name);
        sub_div.appendChild(h3_code);
        sub_div.appendChild(h3_price);
        sup_div.appendChild(sub_div);
        super_div.appendChild(sup_div);
    };
}

function show() {
    // lấy Object có event
    var obj = window.event.target;
    // alert(obj);
    var imgName = obj.src; // lấy địa chỉ của ảnh
    imgName = imgName.substring(imgName.lastIndexOf("/") + 1);
    // alert(imgName);

    var result = findProduct("Images/" + imgName); // tìm vị trí tìm thấy đường dẫn của image
    // alert(result);
    if (result >= 0) { // tìm thấy được thông tin
        var pro_image = document.getElementById('product_image');
        pro_image.src = arr[result].image;
        pro_image.setAttribute("alt", arr[result].code);

        var div = document.getElementById('product_infor');
        div.innerHTML = "<h1>" + arr[result].name + "</h1>";
        div.innerHTML += "<br>Mã: " + arr[result].code;
        div.innerHTML += "<br>Giá: " + arr[result].price + "đ";
        div.innerHTML += "<br>" + arr[result].des +
            "<br><br>*** KHUYẾN MÃI:<br>* Tặng thiệp hoặc băng rôn chúc mừng.<br>* Giảm ngay 20.000đ khi Bạn tạo đơn hàng online.<br>* Giảm tiếp 3% cho đơn hàng Bạn tạo ONLINE lần thứ 2, 5% cho đơn hàng Bạn tạo ONLINE lần thứ 6 và 10% cho đơn hàng Bạn tạo ONLINE lần thứ 12 (Chỉ áp dụng tại Tp. HCM)<br>* Giao hoa miễn phí nội thành TP.HCM.<br>* Cam kết 100% hoàn lại tiền nếu Bạn không hài lòng.<br>* Giao gấp trong vòng 2 giờ.<br>* Cam kết hoa tươi trên 3 ngày.";

        var div_detail_wrap = document.getElementById('detail_wrap');
        div_detail_wrap.style.display = "block";
        var div_details = document.getElementById('details');
        div_details.style.display = "block";
    }
}
// tìm sản phẩm khi biết tên ảnh
function findProduct(imgName) {
    for (var i = 0; i < arr.length; i++) {
        if (arr[i].image == imgName)
            return i;
    }
    return -1;
}
// đóng thông tin sản phẩm
function closeDetail() {
    var div_detail_wrap = document.getElementById('detail_wrap');
    div_detail_wrap.style.display = "none";
    var div_details = document.getElementById('details');
    div_details.style.display = "none";
}
// thêm sản phẩm vào trong giỏ hàng
function addProduct(id_image) {
    // nối lại và gọi là key, mang key dùng getItem để lấy value
    var the_img = document.getElementById(id_image);
    var masp = the_img.alt;
    // var the_select = document.getElementById(id_select);
    // var i = the_select.selectedIndex;
    // var kc = the_select.options[i].text;

    var key = masp; //+ ", " + kc;
    var result = window.localStorage.getItem(key); // luon tra ve String

    if (result == null) { // masp khong co trong local
        window.localStorage.setItem(key, "1"); // mặc định giá trị là 1
        var c = window.localStorage.getItem("count");
        c = parseInt(c) + 1;
        window.localStorage.setItem("Count", c);
        window.alert("Đã thêm vào giỏ hàng của bạn! Click ĐƠN HÀNG để xem giỏ hàng của bạn");
    } else {
        result = parseInt(result) + 1;
        window.localStorage.setItem(key, result); // vào key cập nhật result 
        window.alert("Đã thêm vào giỏ hàng của bạn! Click ĐƠN HÀNG để xem giỏ hàng của bạn");

    }
}
// tìm sản phẩm khi biết mã sản phẩm
function findProductByCode(code) {
    for (var i = 0; i < arr.length; i++) {
        if (arr[i].code == code)
            return i;
    }
    return -1;
}

function showDetailsCart() {
    // tao số đơn đặth hàng ngaoax nhiên
    // var x = Math.round(Math.random() * 89999 + 10000)
    // var p_soddh = document.getElementById("soDDH");
    // p_soddh.innerHTML += x;

    // code này để lấy dât trong localStorage đặt vào điv id="chitiet"
    var tmp = "<table class='table_cart'>";
    tmp = tmp + "<tr>";
    tmp = tmp + "<th>Mã sản phẩm</th>";
    tmp = tmp + "<th>Sản phẩm</th>";
    tmp = tmp + "<th>Giá</th>";
    tmp = tmp + "<th>Số lượng</th>";
    tmp = tmp + "<th>Hình ảnh</th>";
    tmp = tmp + "<th>Tổng tiền</th>";
    tmp = tmp + "<th>Xoá</th>";
    tmp = tmp + "</tr>";

    // chèn thêm tr dựa vào count
    var c = window.localStorage.getItem("Count");
    var sum = 0;
    if (c != null) {
        for (var i = 0; i < window.localStorage.length; i++) {
            var key = window.localStorage.key(i);

            if (key.match("^[A-Z]{2}[0-9]{3}") != null) {
                var kq = findProductByCode(key);
                var sl = window.localStorage.getItem(key);
                if (kq >= 0 && sl != null) {
                    tmp = tmp + "<tr id='tr_" + i + "'>";
                    tmp = tmp + "<td>" + arr[kq].code + "</td>"; // lấy mã sp
                    tmp = tmp + "<td>" + arr[kq].name + "</td>"; // lấy 
                    tmp = tmp + "<td>" + arr[kq].price + "</td>";
                    tmp = tmp + "<td><input type='number' id='number" + i + "' value='" + sl + "' min='1' max='10'</td>";
                    tmp = tmp + "<td><img src='" + arr[kq].image + "'></td>";
                    tmp = tmp + "<td>" + arr[kq].price * sl + " đ</td>";
                    sum += arr[kq].price * sl;
                    tmp = tmp + "<td class='delete_product'><input type='checkbox' id='input_checkbox" + i + "'></span></td>";
                    tmp = tmp + "</tr>";
                }
            }
        }
    }
    tmp = tmp + "</table>";
    var div = document.getElementById('chitiet');
    div.innerHTML = tmp;

    var div = document.getElementById('sumMoney');
    div.innerHTML = "<h3>TỔNG TIỀN THANH TOÁN: " + sum + " VND </h3>";

}

function updateCart() {
    for (var i = 1; i < window.localStorage.length; i++) {
        var code_product = window.localStorage.key(i);

        var kq = findProductByCode(code_product);

        var new_sl = document.getElementById("number" + i).value;
        var check = document.getElementById("input_checkbox" + i).checked;

        if (check == true) {
            window.localStorage.removeItem(code_product);
        } else {
            window.localStorage.setItem(code_product, new_sl);
        }
    }
    location.reload();

}

function openPay() {
    var sum = 0;
    for (var i = 1; i < window.localStorage.length; i++) {
        var key = window.localStorage.key(i);
        var kq = findProductByCode(key);
        var sl = window.localStorage.getItem(key);
        sum += arr[kq].price * sl;
    }
    if (sum == 0) {
        alert("Không có sản phẩm nào trong đơn hàng của bạn! Vui lòng chọn sản phẩm! Xin cảm ơn!");
        window.open("productsDraft.html", "_self");
        return false;
    } else {
        window.open("pay.html", "_self");
        return true;
    }
}

function back2Cart() {
    window.open("cart.html", "_self");
}

function back2Products() {
    window.open("productsDraft.html", "_self");
}

function showCheckBox() {
    var check = document.getElementById("checkbox").checked;
    var display = document.getElementById('infor-receiver');
    if (check == true) {
        display.style.display = "none";
    } else {
        display.style.display = "block";
    }
}